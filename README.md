# dnspodsh

基于dnspod api构架的一键修改dnspod记录工具，满足需要批量切换dns指向的需求

可以配置多个逗号分隔的csv文件，例如gaofang.csv、idc.csv等。（csv文件可以在dnspod后台导出样例并修改）

这个脚本是我在dnspod的页面上找到的

我在原脚本的基础上做了几点修改：

1. 支持token登录。DNSPOD官方推荐的方法，避免在脚本中直接使用账户和密码。
2. 修改目标记录的新IP从配置文件中获取，支持多域名的A记录修改，暂不支持CNAME等其他类型的修改
3. 修改目标记录同时可以根据配置信息修改对应ttl时间

大致逻辑：

1. 最后一列去重判断总共有多少域名
2. 分别拉取每个域名的子域名信息
3. 根据列表文件中子域名信息，查找oldip，对比列表中的newip
4. 如果不相同，则修改

这个脚本原作者是zrong(zengrong.net)，他写了一篇不错的文档来介绍脚本的使用方法，地址是：http://zengrong.net/post/1524.htm

